<div class="row">
   <div class="col-lg-8 offset-lg-2">
     <table id="js-table-answer" class="table">
     <% @answers.each do |answer| %>
    <tr id="answer-<%=answer.id%>">
      <% if answer.parent_id.present? || answer.id.blank? %>
        <% next %>
      <% end %>
      <td style="width: 80px">
       <%= image_tag 'aaa.jpg', class: 'rounded-circle', size: '60x60' %>
      </td>
      <td>
        <h3><%= answer.user.name %></h3>
        <div id="js-answer-<%= answer.id %>">
         <%= simple_format(answer.body) %>
        </div>
        <% if answer. replies.present?%>
        <p>
          <a data-toggle="collapse" href="#multiCollapseExample1" role="button" aria-expanded="false" aria-controls="multiCollapseExample1"><i class="fas fa-comment-dots">コメント一覧</i></a>
        </p>
        <div class="row">
          <div class="col">
            <div class="collapse multi-collapse" id="multiCollapseExample1">
             <div class="card card-body">
             <div id="reply_area">
             <div class= "float-left">
             <% answer.replies.each do |reply| %>
               <div> 
               <div>---------------------------------------------------------------------------------------------------------------------</div>
                <%= image_tag 'aaa.jpg', class: 'rounded-circle', size: '40x40' %>
                <h5><%= reply.user.name %></h5>
               </div>
               <%= simple_format(reply.body) %>
            <% end %>
            </div>
            </div>
            </div>
            </div>
         </div>
         <% end %>
      </td>
      <td class="action">
        <div class="text-right">
          <% if current_user.own?(answer) && @question.best_answer_id != answer.id %>
            <%= link_to answer_path(answer),
               class: 'js-delete-answer-button',
               method: :delete,
                data: { confirm: 'コメント削除しますか？'} do %>
                <%= icon 'fa', 'trash' %>
            <% end %>
          <% end %>
          <% if current_user.own?(@question) && @question.best_answer_id != answer.id %>
            <%= form_with(model: @question, local: true, data: {confirm: "#{answer.user.name}さんの回答をベストアンサーにします。この修正は変更できません、よろしいですか？"}) do |f| %>
               <%= f.hidden_field :best_answer_id, value: answer.id %>
               <%= f.submit "ベストアンサーに選ぶ",class:"btn btn-border" unless @question.best_answer_id.present? %>
            <% end %>
               <% elsif  @question.best_answer_id == answer.id%>
               <p><i class="fas fa-medal fa-4x"></i></p>
          <% end %>
          <p>
          <a  data-toggle="collapse" href="#collapseExample" role="button" aria-expanded="false" aria-controls="collapseExample">
          <i class="fas fa-reply">返信</i>
            </a>
           </p>
         <div class="collapse" id="collapseExample">
         <div class="card card-body">
         <%= form_with(model:[@question,@answer_reply]) do |f| %>
            <p><label>アンサー返信フォーム</label></p>
            <div class="form-group has-success">
             <textarea class="form-control input-form" name="answer[body]" rows="2"><%=@answer_reply.body%></textarea>
             </div>
                <%= f.hidden_field :parent_id, value: answer.id,  id: "#{answer.id}"%>
                <div class="actions">
                <div class= "text-right">
                  <%= f.submit  '返信する', class: "btn btn-success"%>
                  </div>
          <% end %>
         </div>
         </div>
        </td>
    </tr>
     <% end %>
     </table>
   </div>
 </div>